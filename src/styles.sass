$border-size: 0.1rem

:root
    //default light mode
    --color-border: rgba(0,0,0,0.23)
    --color-border-hover: rgba(0,0,0,0.23)
    --color-border-active: rgba(4, 119, 0, 0.23)
    --color-history: rgb(146, 233, 255)
    --color-winner: rgb(150, 255, 146)

html, body
    margin: 0
    height: 100%
    width: 100%

@mixin darkMode()
    background: black
    color: white
    --color-border: white
    --color-border-active: rgb(53, 187, 48)
    --color-border-hover: rgba(205, 205, 205)

    .util-button
        background-color: white

@mixin lightMode()
    background: white
    color: black
    --color-border: rgba(0,0,0,0.23)
    --color-border-hover: rgba(0,0,0,0.23)
    --color-border-active: rgba(4, 119, 0, 0.23)

@media (prefers-color-scheme: dark)
    html,body
        @include darkMode()

@media (prefers-color-scheme: light)
    html,body
        @include lightMode()

.main-screen
    width: 100%
    height: 100%
    display: grid
    place-items: center
    place-content: center
    grid-auto-flow: row
    gap: .5rem

.dark-theme
    @include darkMode()

.light-theme
    @include lightMode()

.cell-0
    border-right: $border-size solid var(--color-border)
    border-bottom: $border-size solid var(--color-border)

.cell-1
    border-bottom: $border-size solid var(--color-border)

.cell-2
    border-left: $border-size solid var(--color-border)
    border-bottom: $border-size solid var(--color-border)

.cell-3
    border-right: $border-size solid var(--color-border)

.cell-5
    border-left: $border-size solid var(--color-border)

.cell-6
    border-right: $border-size solid var(--color-border)
    border-top: $border-size solid var(--color-border)

.cell-7
    border-top: $border-size solid var(--color-border)

.cell-8
    border-left: $border-size solid var(--color-border)
    border-top: $border-size solid var(--color-border)

.grid-active
    border-radius: 10px
    box-shadow: 0 0 5px 6px var(--color-border-active) inset
    -webkit-box-shadow: 0 0 5px 6px var(--color-border-active) inset
    -moz-box-shadow: 0 0 5px 6px var(--color-border-active) inset

.grid-hover-next
    border-radius: 10px
    box-shadow: 0 0 5px 6px var(--color-border-hover)
    -webkit-box-shadow: 0 0 5px 6px var(--color-border-hover)
    -moz-box-shadow: 0 0 5px 6px var(--color-border-hover)

.cell-preview-hover
    opacity: 0.25
    cursor: pointer

.cell-winner
    background: var(--color-winner)
    border-radius: 10rem

.cell-last-played
    background: var(--color-history)
    border-radius: 10rem

.main-game
    display: grid
    grid-auto-flow: column
    gap: 1rem

.util
    display: grid
    grid-auto-flow: row
    place-content: center
    place-items: center
    gap: 1rem

.util-button
    display: grid
    place-content: center
    // border-radius: 10rem
    width: 3rem
    height: 3rem
    overflow: visible

    &:hover
        cursor: pointer
        box-shadow: 0 0 5px 6px var(--color-border-hover)
        -webkit-box-shadow: 0 0 5px 6px var(--color-border-hover)
        -moz-box-shadow: 0 0 5px 6px var(--color-border-hover)

    img
        width: 2rem
        height: 2rem

    &:first-of-type
        border-top-left-radius: 10rem
        border-bottom-left-radius: 10rem

    &:last-of-type
        border-top-right-radius: 10rem
        border-bottom-right-radius: 10rem

.util-mid-row
    display: grid
    place-content: center
    grid-auto-flow: column

@mixin resize($big-cell-size, $cell-size, $padding-size)
    .grid
        display: grid
        grid-template-columns: 1fr 1fr 1fr
        grid-template-rows: 1fr 1fr 1fr
        padding: $padding-size

    .big-grid
        display: grid

        grid-template-columns: $big-cell-size $big-cell-size $big-cell-size
        grid-template-rows: $big-cell-size $big-cell-size $big-cell-size

    .cell
        display: grid
        place-items: center
        font-size: $cell-size - $padding-size
        min-width: $cell-size
        min-height: $cell-size
        text-align: center
        user-select: none

    .main-message,
    .main-message > *
        display: grid
        place-content: center
        user-select: none
        font-size: calc($big-cell-size/3)
        height: calc($big-cell-size/2)
        margin: 0
        padding: 0

    .util-history
        height: $big-cell-size*3 - $cell-size
        max-height: $big-cell-size*2
        overflow: scroll
        box-shadow: 0 0 5px 6px var(--color-border-hover)
        -webkit-box-shadow: 0 0 5px 6px var(--color-border-hover)
        -moz-box-shadow: 0 0 5px 6px var(--color-border-hover)
        border-top-left-radius: 1rem
        border-top-right-radius: 1rem
        border-bottom-left-radius: 10rem
        border-bottom-right-radius: 10rem

        padding-block: 1rem
        text-align: center
        width: $cell-size

        div
            user-select: none
            div:hover
                background-color: var(--color-history)
                border-radius: 10rem

    .grid-winner
        font-size: $big-cell-size * 0.87
        width: $big-cell-size * 0.87
        height: $big-cell-size * 0.87
        place-content: center

@media only screen and (max-width: 750px)
    $big-cell-size: 7rem
    $cell-size: calc($big-cell-size/4)
    $padding-size: .4rem

    html,body
        margin: 0
        padding: 0
        height: max(100% , 50rem)

    .main-game
        grid-auto-flow: row !important

    .util
        place-content: normal

    .main-screen
        justify-content: normal
        align-content: baseline

    .main-message
        p
            font-size: 4vh

    .util-history
        margin-top: 1rem
        width: 90% !important
        border-bottom-left-radius: 1rem !important
        border-bottom-right-radius: 1rem !important
        margin-bottom: 2rem

        .history-list
            display: grid
            grid-template-columns: repeat(5, 1fr)

    @include resize($big-cell-size, $cell-size, $padding-size)

@media only screen and (min-width: 751px)
    $big-cell-size: 12rem
    $cell-size: calc($big-cell-size/4)
    $padding-size: 0.75rem

    @include resize($big-cell-size, $cell-size, $padding-size)

@media only screen and (min-width: 1001px)
    $big-cell-size: 15rem
    $cell-size: calc($big-cell-size/4)
    $padding-size: 1rem

    @include resize($big-cell-size, $cell-size, $padding-size)
